{% extends 'sports_stats/base.html' %}

{% block title %}
    NFL Player Stats
{% endblock %}

{% block content %}
    <h2>Player Details</h2>
    <div class="card w-75 m-3">
        <div class="card-body">
            <h5 class="card-title">{{ defense.PlayerName }}</h5>
        </div>
    </div>
        
    {% if context %}
    <table class="table">
        <thead>
            <tr>
                {% for field_name in field_names %}
                    <th>{{ field_name }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for item in stats_data %}
                <tr>
                    {% for field_name in field_names %}
                         {% with forloop.counter0 as field_index %}
                            {% if field_index == 1 %}  <!-- Assuming PlayerName is in the first column -->
                                {% if item|get_field:field_name %}
                                    <td><a href="{% url 'NFL_Player' name=item|get_field:field_name %}">{{ item|get_field:field_name }}</a></td>
                                {% else %}
                                    <td>No Name</td>
                                {% endif %}
                            {% else %}
                                <td>{{ item|get_field:field_name }}</td>
                            {% endif %}
                        {% endwith %}
                    {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endif %}

{% endblock %}